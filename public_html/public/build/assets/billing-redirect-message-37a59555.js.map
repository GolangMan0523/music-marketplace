{"version":3,"file":"billing-redirect-message-37a59555.js","sources":["../../../node_modules/@stripe/stripe-js/dist/stripe.esm.js","../../../common/resources/client/billing/checkout/stripe/use-stripe.ts","../../../common/resources/client/billing/checkout/stripe/stripe-elements-form.tsx","../../../common/resources/client/billing/billing-redirect-message.tsx"],"sourcesContent":["var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"2.4.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function () {\n    reject(new Error('Failed to load Stripe.js'));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise[\"catch\"](function (error) {\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise$1;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise$1) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n  return stripePromise$1;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","import {useEffect, useRef, useState} from 'react';\r\nimport {loadStripe, Stripe, StripeElements} from '@stripe/stripe-js';\r\nimport {apiClient} from '@common/http/query-client';\r\nimport {useSelectedLocale} from '@common/i18n/selected-locale';\r\nimport {useAuth} from '@common/auth/use-auth';\r\nimport {useIsDarkMode} from '@common/ui/themes/use-is-dark-mode';\r\nimport {useSettings} from '@common/core/settings/use-settings';\r\n\r\ninterface UseStripeProps {\r\n  type: 'setupIntent' | 'subscription';\r\n  productId?: string | number;\r\n  priceId?: string | number;\r\n}\r\nexport function useStripe({type, productId, priceId}: UseStripeProps) {\r\n  const {user} = useAuth();\r\n  const isDarkMode = useIsDarkMode();\r\n  const isInitiatedRef = useRef<boolean>(false);\r\n  const paymentElementRef = useRef<HTMLDivElement>(null);\r\n  const {localeCode} = useSelectedLocale();\r\n  const [stripe, setStripe] = useState<Stripe | null>(null);\r\n  const [elements, setElements] = useState<StripeElements | null>(null);\r\n  const {\r\n    branding: {site_name},\r\n    billing: {\r\n      stripe_public_key,\r\n      stripe: {enable},\r\n    },\r\n  } = useSettings();\r\n\r\n  useEffect(() => {\r\n    if (!enable || !stripe_public_key || isInitiatedRef.current) return;\r\n\r\n    Promise.all([\r\n      // load stripe js library\r\n      loadStripe(stripe_public_key, {\r\n        apiVersion: '2022-08-01',\r\n        locale: localeCode as any,\r\n      }),\r\n      // create partial subscription for clientSecret\r\n      type === 'setupIntent'\r\n        ? createSetupIntent()\r\n        : createSubscription(productId!, priceId),\r\n    ]).then(([stripe, {clientSecret}]) => {\r\n      if (stripe && paymentElementRef.current) {\r\n        const elements = stripe.elements({\r\n          clientSecret,\r\n          appearance: {\r\n            theme: isDarkMode ? 'night' : 'stripe',\r\n          },\r\n        });\r\n\r\n        // Create and mount the Payment Element\r\n        const paymentElement = elements.create('payment', {\r\n          business: {name: site_name},\r\n          terms: {card: 'never'},\r\n          fields: {\r\n            billingDetails: {\r\n              address: 'auto',\r\n            },\r\n          },\r\n          defaultValues: {\r\n            billingDetails: {\r\n              email: user?.email,\r\n            },\r\n          },\r\n        });\r\n        paymentElement.mount(paymentElementRef.current);\r\n\r\n        setStripe(stripe);\r\n        setElements(elements);\r\n      }\r\n    });\r\n\r\n    isInitiatedRef.current = true;\r\n  }, [\r\n    productId,\r\n    stripe_public_key,\r\n    enable,\r\n    isDarkMode,\r\n    localeCode,\r\n    site_name,\r\n    type,\r\n    user?.email,\r\n  ]);\r\n\r\n  return {\r\n    stripe,\r\n    elements,\r\n    paymentElementRef,\r\n    stripeIsEnabled: stripe_public_key != null && enable,\r\n  };\r\n}\r\n\r\nfunction createSetupIntent(): Promise<{clientSecret: string}> {\r\n  return apiClient.post('billing/stripe/create-setup-intent').then(r => r.data);\r\n}\r\n\r\nfunction createSubscription(\r\n  productId: number | string,\r\n  priceId?: number | string\r\n): Promise<{clientSecret: string}> {\r\n  return apiClient\r\n    .post('billing/stripe/create-partial-subscription', {\r\n      product_id: productId,\r\n      price_id: priceId,\r\n    })\r\n    .then(r => r.data);\r\n}\r\n","import clsx from 'clsx';\r\nimport {Button} from '@common/ui/buttons/button';\r\nimport {FormEventHandler, Fragment, ReactNode, useState} from 'react';\r\nimport {useStripe} from '@common/billing/checkout/stripe/use-stripe';\r\nimport {Skeleton} from '@common/ui/skeleton/skeleton';\r\n\r\ninterface StripeElementsFormProps {\r\n  productId?: string | number;\r\n  priceId?: string | number;\r\n  type: 'setupIntent' | 'subscription';\r\n  submitLabel: ReactNode;\r\n  returnUrl: string;\r\n}\r\nexport function StripeElementsForm({\r\n  productId,\r\n  priceId,\r\n  type = 'subscription',\r\n  submitLabel,\r\n  returnUrl,\r\n}: StripeElementsFormProps) {\r\n  const {stripe, elements, paymentElementRef, stripeIsEnabled} = useStripe({\r\n    type,\r\n    productId,\r\n    priceId,\r\n  });\r\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // disable upgrade button if stripe is enabled, but not loaded yet\r\n  const stripeIsReady: boolean =\r\n    !stripeIsEnabled || (elements != null && stripe != null);\r\n\r\n  const handleSubmit: FormEventHandler = async e => {\r\n    e.preventDefault();\r\n\r\n    // stripe has not loaded yet\r\n    if (!stripe || !elements) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const method =\r\n        type === 'subscription' ? 'confirmPayment' : 'confirmSetup';\r\n      const result = await stripe[method]({\r\n        elements,\r\n        confirmParams: {\r\n          return_url: returnUrl,\r\n        },\r\n      });\r\n\r\n      // don't show validation error as it will be shown already by stripe payment element\r\n      if (result.error?.type !== 'validation_error' && result.error?.message) {\r\n        setErrorMessage(result.error.message);\r\n      }\r\n    } catch {}\r\n\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div\r\n        ref={paymentElementRef}\r\n        className={clsx('min-h-[303px]', !stripeIsEnabled && 'hidden')}\r\n      >\r\n        {stripeIsEnabled && <StripeSkeleton />}\r\n      </div>\r\n      {errorMessage && !isSubmitting && (\r\n        <div className=\"mt-20 text-danger\">{errorMessage}</div>\r\n      )}\r\n      <Button\r\n        variant=\"flat\"\r\n        color=\"primary\"\r\n        size=\"md\"\r\n        className=\"mt-40 w-full\"\r\n        type=\"submit\"\r\n        disabled={isSubmitting || !stripeIsReady}\r\n      >\r\n        {submitLabel}\r\n      </Button>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction StripeSkeleton() {\r\n  return (\r\n    <Fragment>\r\n      <Skeleton className=\"mb-20 h-30\" />\r\n      <Skeleton className=\"mb-20 h-30\" />\r\n      <Skeleton className=\"mb-20 h-30\" />\r\n      <Skeleton className=\"h-30\" />\r\n    </Fragment>\r\n  );\r\n}\r\n","import {MessageDescriptor} from '../i18n/message-descriptor';\r\nimport {Link, To} from 'react-router-dom';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {TaskAltIcon} from '../icons/material/TaskAlt';\r\nimport {ErrorIcon} from '../icons/material/Error';\r\nimport {Trans} from '../i18n/trans';\r\nimport {Button} from '../ui/buttons/button';\r\nimport {Skeleton} from '../ui/skeleton/skeleton';\r\nimport {opacityAnimation} from '../ui/animation/opacity-animation';\r\n\r\nexport interface BillingRedirectMessageConfig {\r\n  message: MessageDescriptor;\r\n  status: 'success' | 'error';\r\n  link: To;\r\n  buttonLabel: MessageDescriptor;\r\n}\r\n\r\ninterface BillingRedirectMessageProps {\r\n  config?: BillingRedirectMessageConfig;\r\n}\r\nexport function BillingRedirectMessage({config}: BillingRedirectMessageProps) {\r\n  return (\r\n    <AnimatePresence initial={false} mode=\"wait\">\r\n      <div className=\"mt-80\">\r\n        {config ? (\r\n          <m.div\r\n            className=\"text-center\"\r\n            key=\"payment-status\"\r\n            {...opacityAnimation}\r\n          >\r\n            {config.status === 'success' ? (\r\n              <TaskAltIcon className=\"text-positive text-6xl\" />\r\n            ) : (\r\n              <ErrorIcon className=\"text-danger text-6xl\" />\r\n            )}\r\n            <div className=\"text-2xl font-semibold mt-30\">\r\n              <Trans {...config.message} />\r\n            </div>\r\n            <Button\r\n              variant=\"flat\"\r\n              color=\"primary\"\r\n              className=\"w-full mt-30\"\r\n              size=\"md\"\r\n              elementType={Link}\r\n              to={config.link}\r\n            >\r\n              <Trans {...config.buttonLabel} />\r\n            </Button>\r\n          </m.div>\r\n        ) : (\r\n          <LoadingSkeleton key=\"loading-skeleton\" />\r\n        )}\r\n      </div>\r\n    </AnimatePresence>\r\n  );\r\n}\r\n\r\nfunction LoadingSkeleton() {\r\n  return (\r\n    <m.div\r\n      className=\"text-center max-w-280\"\r\n      key=\"loading-skeleton\"\r\n      {...opacityAnimation}\r\n    >\r\n      <Skeleton size=\"w-50 h-50\" variant=\"rect\" />\r\n      <Skeleton className=\"text-2xl mt-30\" />\r\n      <Skeleton size=\"h-42\" className=\"mt-30\" />\r\n    </m.div>\r\n  );\r\n}\r\n"],"names":["V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","findScript","scripts","i","script","injectScript","params","queryString","headOrBody","registerWrapper","stripe","startTime","stripePromise","onErrorListener","onLoadListener","onError","reject","onLoad","resolve","loadScript","_script$parentNode","error","initStripe","maybeStripe","args","stripePromise$1","loadCalled","getStripePromise","loadStripe","_len","_key","useStripe","type","productId","priceId","user","useAuth","isDarkMode","useIsDarkMode","isInitiatedRef","useRef","paymentElementRef","localeCode","useSelectedLocale","setStripe","useState","elements","setElements","site_name","stripe_public_key","enable","useSettings","useEffect","createSetupIntent","createSubscription","clientSecret","apiClient","r","StripeElementsForm","submitLabel","returnUrl","stripeIsEnabled","errorMessage","setErrorMessage","isSubmitting","setIsSubmitting","stripeIsReady","handleSubmit","e","result","_a","_b","jsxs","jsx","clsx","StripeSkeleton","Button","Fragment","Skeleton","BillingRedirectMessage","config","AnimatePresence","m","opacityAnimation","TaskAltIcon","ErrorIcon","Trans","Link","LoadingSkeleton"],"mappings":"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","x_google_ignoreList":[0]}