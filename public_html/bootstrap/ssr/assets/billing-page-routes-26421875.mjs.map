{"version":3,"file":"billing-page-routes-26421875.mjs","sources":["../../../common/resources/client/auth/guards/subscribed-route.tsx","../../../common/resources/client/billing/billing-page/billing-page-layout.tsx","../../../common/resources/client/billing/billing-page/change-payment-method/change-payment-method-layout.tsx","../../../common/resources/client/billing/billing-page/change-payment-method/change-payment-method-page.tsx","../../../common/resources/client/billing/billing-page/use-billing-user.ts","../../../common/resources/client/billing/billing-page/change-payment-method/change-payment-method-done.tsx","../../../common/resources/client/billing/billing-page/billing-plan-panel.tsx","../../../common/resources/client/billing/billing-page/change-plan-page.tsx","../../../common/resources/client/billing/billing-page/requests/use-change-subscription-plan.ts","../../../common/resources/client/billing/billing-page/confirm-plan-change-page.tsx","../../../common/resources/client/billing/billing-page/confirm-plan-cancellation-page.tsx","../../../common/resources/client/billing/billing-page/confirm-plan-renewal-page.tsx","../../../common/resources/client/billing/billing-page/panels/cancelled-plan-panel.tsx","../../../common/resources/client/billing/billing-page/panels/active-plan-panel.tsx","../../../common/resources/client/billing/billing-page/panels/paypal.svg","../../../common/resources/client/billing/billing-page/panels/payment-method-panel.tsx","../../../common/resources/client/billing/billing-page/requests/use-invoices.ts","../../../common/resources/client/billing/billing-page/panels/invoice-history-panel.tsx","../../../common/resources/client/billing/billing-page/billing-page.tsx","../../../common/resources/client/billing/billing-page/billing-page-routes.tsx"],"sourcesContent":["import {useAuth} from '../use-auth';\r\nimport {ReactElement} from 'react';\r\nimport {Navigate, Outlet} from 'react-router-dom';\r\n\r\ninterface GuestRouteProps {\r\n  children: ReactElement;\r\n}\r\nexport function SubscribedRoute({children}: GuestRouteProps) {\r\n  const {isSubscribed} = useAuth();\r\n\r\n  if (!isSubscribed) {\r\n    return <Navigate to=\"/pricing\" replace />;\r\n  }\r\n\r\n  return children || <Outlet />;\r\n}\r\n","import {useUser} from '../../auth/ui/use-user';\r\nimport {ProgressCircle} from '../../ui/progress/progress-circle';\r\nimport {useAuth} from '../../auth/use-auth';\r\nimport {Outlet} from 'react-router-dom';\r\nimport {Footer} from '../../ui/footer/footer';\r\nimport {StaticPageTitle} from '../../seo/static-page-title';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {Fragment} from 'react';\r\n\r\nimport {PlayerNavbarLayout} from '@app/web-player/layout/player-navbar-layout';\r\nimport {DashboardLayout} from '@common/ui/layout/dashboard-layout';\r\nimport {SidedavFrontend} from '@app/web-player/layout/sidenav-frontend';\r\nimport {Sidenav} from '@app/web-player/layout/sidenav';\r\nimport {DashboardContent} from '@common/ui/layout/dashboard-content';\r\nimport {useSettings} from '@common/core/settings/use-settings';\r\nimport {useIsMobileMediaQuery} from '@common/utils/hooks/is-mobile-media-query';\r\n\r\nexport function BillingPageLayout() {\r\n  const {user} = useAuth();\r\n  const {player} = useSettings();\r\n  const isMobile = useIsMobileMediaQuery();\r\n  const query = useUser(user!.id, {\r\n    with: ['subscriptions.product', 'subscriptions.price'],\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <StaticPageTitle>\r\n        <Trans message=\"Billing\" />\r\n      </StaticPageTitle>\r\n      <DashboardLayout\r\n        name=\"web-player\"\r\n        initialRightSidenavStatus={player?.hide_queue ? 'closed' : 'open'}\r\n      >\r\n        <PlayerNavbarLayout\r\n          size=\"sm\"\r\n          menuPosition=\"billing-page\"\r\n          className=\"flex-shrink-0\"\r\n        />\r\n        <SidedavFrontend position=\"left\" display=\"block\">\r\n          <Sidenav />\r\n        </SidedavFrontend>\r\n        <DashboardContent>\r\n          <div className=\"flex flex-col\">\r\n            <div className=\"container mx-auto my-24 flex-auto px-24\">\r\n              {query.isLoading ? (\r\n                <ProgressCircle\r\n                  className=\"my-80\"\r\n                  aria-label=\"Loading user..\"\r\n                  isIndeterminate\r\n                />\r\n              ) : (\r\n                <Outlet />\r\n              )}\r\n            </div>\r\n            <Footer />\r\n          </div>\r\n        </DashboardContent>\r\n      </DashboardLayout>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {Fragment} from 'react';\r\nimport {Breadcrumb} from '../../../ui/breadcrumbs/breadcrumb';\r\nimport {useNavigate} from '../../../utils/hooks/use-navigate';\r\nimport {BreadcrumbItem} from '../../../ui/breadcrumbs/breadcrumb-item';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {Outlet} from 'react-router-dom';\r\n\r\nconst previousUrl = '/billing';\r\n\r\nexport function ChangePaymentMethodLayout() {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem isLink onSelected={() => navigate(previousUrl)}>\r\n          <Trans message=\"Billing\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <Trans message=\"Payment method\" />\r\n        </BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <h1 className=\"text-3xl font-bold my-32 md:my-64\">\r\n        <Trans message=\"Change payment method\" />\r\n      </h1>\r\n      <Outlet />\r\n    </Fragment>\r\n  );\r\n}\r\n","import {Trans} from '../../../i18n/trans';\r\nimport {Button} from '../../../ui/buttons/button';\r\nimport {Link} from 'react-router-dom';\r\nimport {StripeElementsForm} from '../../checkout/stripe/stripe-elements-form';\r\nimport {useSettings} from '../../../core/settings/use-settings';\r\n\r\nconst previousUrl = '/billing';\r\n\r\nexport function ChangePaymentMethodPage() {\r\n  const {base_url} = useSettings();\r\n\r\n  return (\r\n    <div className=\"max-w-[464px]\">\r\n      <StripeElementsForm\r\n        type=\"setupIntent\"\r\n        submitLabel={<Trans message=\"Change\" />}\r\n        returnUrl={`${base_url}/billing/change-payment-method/done`}\r\n      />\r\n      <Button\r\n        variant=\"outline\"\r\n        className=\"w-full mt-16\"\r\n        size=\"md\"\r\n        to={previousUrl}\r\n        elementType={Link}\r\n        type=\"button\"\r\n      >\r\n        <Trans message=\"Go back\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n","import {useUser} from '../../auth/ui/use-user';\r\nimport {queryClient} from '@common/http/query-client';\r\n\r\nexport function useBillingUser() {\r\n  const query = useUser('me', {\r\n    with: ['subscriptions.product', 'subscriptions.price'],\r\n  });\r\n\r\n  const subscription = query.data?.user.subscriptions?.[0];\r\n\r\n  return {subscription, isLoading: query.isLoading, user: query.data?.user};\r\n}\r\n\r\nexport function invalidateBillingUserQuery() {\r\n  queryClient.invalidateQueries({queryKey: ['users']});\r\n}\r\n","import {useEffect, useRef, useState} from 'react';\r\nimport {useSearchParams} from 'react-router-dom';\r\nimport {loadStripe, SetupIntent} from '@stripe/stripe-js';\r\nimport {message} from '../../../i18n/message';\r\nimport {apiClient} from '../../../http/query-client';\r\nimport {useNavigate} from '../../../utils/hooks/use-navigate';\r\nimport {\r\n  BillingRedirectMessage,\r\n  BillingRedirectMessageConfig,\r\n} from '../../billing-redirect-message';\r\nimport {invalidateBillingUserQuery} from '../use-billing-user';\r\nimport {useSettings} from '../../../core/settings/use-settings';\r\n\r\nconst previousUrl = '/billing';\r\n\r\nexport function ChangePaymentMethodDone() {\r\n  const {\r\n    billing: {stripe_public_key},\r\n  } = useSettings();\r\n  const navigate = useNavigate();\r\n\r\n  const [params] = useSearchParams();\r\n  const clientSecret = params.get('setup_intent_client_secret');\r\n\r\n  const [messageConfig, setMessageConfig] =\r\n    useState<BillingRedirectMessageConfig>();\r\n\r\n  const stripeInitiated = useRef<boolean>();\r\n\r\n  useEffect(() => {\r\n    if (stripeInitiated.current || !clientSecret) return;\r\n    loadStripe(stripe_public_key!).then(stripe => {\r\n      if (!stripe) {\r\n        setMessageConfig(getRedirectMessageConfig());\r\n        return;\r\n      }\r\n      stripe.retrieveSetupIntent(clientSecret).then(({setupIntent}) => {\r\n        if (setupIntent?.status === 'succeeded') {\r\n          changeDefaultPaymentMethod(setupIntent.payment_method as string).then(\r\n            () => {\r\n              invalidateBillingUserQuery();\r\n            }\r\n          );\r\n        }\r\n        setMessageConfig(getRedirectMessageConfig(setupIntent?.status));\r\n      });\r\n    });\r\n    stripeInitiated.current = true;\r\n  }, [stripe_public_key, clientSecret]);\r\n\r\n  if (!clientSecret) {\r\n    navigate(previousUrl);\r\n    return null;\r\n  }\r\n\r\n  return <BillingRedirectMessage config={messageConfig} />;\r\n}\r\n\r\nfunction getRedirectMessageConfig(\r\n  status?: SetupIntent.Status\r\n): BillingRedirectMessageConfig {\r\n  switch (status) {\r\n    case 'succeeded':\r\n      return {\r\n        ...redirectMessageDefaults,\r\n        message: message('Payment method changed successfully!'),\r\n        status: 'success',\r\n      };\r\n    case 'processing':\r\n      return {\r\n        ...redirectMessageDefaults,\r\n        message: message(\r\n          \"Your request is processing. We'll update you when your payment method is confirmed.\"\r\n        ),\r\n        status: 'success',\r\n      };\r\n    case 'requires_payment_method':\r\n      return {\r\n        ...redirectMessageDefaults,\r\n        message: message(\r\n          'Payment method confirmation failed. Please try another payment method.'\r\n        ),\r\n        status: 'error',\r\n      };\r\n    default:\r\n      return {\r\n        ...redirectMessageDefaults,\r\n        message: message('Something went wrong'),\r\n        status: 'error',\r\n      };\r\n  }\r\n}\r\n\r\nconst redirectMessageDefaults: Omit<\r\n  BillingRedirectMessageConfig,\r\n  'message' | 'status'\r\n> = {\r\n  link: previousUrl,\r\n  buttonLabel: message('Go back'),\r\n};\r\n\r\nfunction changeDefaultPaymentMethod(paymentMethodId: string) {\r\n  return apiClient.post('billing/stripe/change-default-payment-method', {\r\n    payment_method_id: paymentMethodId,\r\n  });\r\n}\r\n","import {ReactNode} from 'react';\r\n\r\ninterface BillingPlanPanelProps {\r\n  title: ReactNode;\r\n  children: ReactNode;\r\n}\r\nexport function BillingPlanPanel({title, children}: BillingPlanPanelProps) {\r\n  return (\r\n    <div className=\"mb-64\">\r\n      <div className=\"text-sm font-medium uppercase pb-16 mb-16 border-b\">\r\n        {title}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import {Breadcrumb} from '../../ui/breadcrumbs/breadcrumb';\r\nimport {BreadcrumbItem} from '../../ui/breadcrumbs/breadcrumb-item';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {useNavigate} from '../../utils/hooks/use-navigate';\r\nimport {BillingPlanPanel} from './billing-plan-panel';\r\nimport {Product} from '../product';\r\nimport {\r\n  findBestPrice,\r\n  UpsellBillingCycle,\r\n} from '../pricing-table/find-best-price';\r\nimport {Fragment, useState} from 'react';\r\nimport {FormattedPrice} from '../../i18n/formatted-price';\r\nimport {Button} from '../../ui/buttons/button';\r\nimport {Link} from 'react-router-dom';\r\nimport {useProducts} from '../pricing-table/use-products';\r\nimport {Price} from '../price';\r\nimport {useBillingUser} from './use-billing-user';\r\nimport {CheckIcon} from '../../icons/material/Check';\r\nimport {Skeleton} from '../../ui/skeleton/skeleton';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {BillingCycleRadio} from '../pricing-table/billing-cycle-radio';\r\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\r\nimport {UpsellLabel} from '@common/billing/pricing-table/upsell-label';\r\n\r\nexport function ChangePlanPage() {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem isLink onSelected={() => navigate('/billing')}>\r\n          <Trans message=\"Billing\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <Trans message=\"Plans\" />\r\n        </BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <h1 className=\"my-32 text-3xl font-bold md:my-64\">\r\n        <Trans message=\"Change your plan\" />\r\n      </h1>\r\n      <BillingPlanPanel title={<Trans message=\"Available plans\" />}>\r\n        <AnimatePresence initial={false} mode=\"wait\">\r\n          <PlanList />\r\n        </AnimatePresence>\r\n      </BillingPlanPanel>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction PlanList() {\r\n  const query = useProducts();\r\n  const [selectedCycle, setSelectedCycle] =\r\n    useState<UpsellBillingCycle>('monthly');\r\n\r\n  if (query.isLoading) {\r\n    return <PlanSkeleton key=\"plan-skeleton\" />;\r\n  }\r\n\r\n  return (\r\n    <Fragment key=\"plan-list\">\r\n      <BillingCycleRadio\r\n        products={query.data?.products}\r\n        selectedCycle={selectedCycle}\r\n        onChange={setSelectedCycle}\r\n        className=\"mb-20\"\r\n        size=\"md\"\r\n      />\r\n      {query.data?.products.map(plan => {\r\n        const price = findBestPrice(selectedCycle, plan.prices);\r\n        if (!price || plan.hidden) return null;\r\n        return (\r\n          <m.div\r\n            {...opacityAnimation}\r\n            key={plan.id}\r\n            className=\"justify-between gap-40 border-b py-32 md:flex\"\r\n          >\r\n            <div className=\"mb-40 md:mb-0\">\r\n              <div className=\"text-xl font-bold\">{plan.name}</div>\r\n              {price ? (\r\n                <FormattedPrice\r\n                  priceClassName=\"font-bold text-4xl\"\r\n                  periodClassName=\"text-muted text-xs\"\r\n                  variant=\"separateLine\"\r\n                  price={price}\r\n                  className=\"mt-32\"\r\n                />\r\n              ) : (\r\n                <div className=\"text-4xl font-bold\">\r\n                  <Trans message=\"Free\" />\r\n                </div>\r\n              )}\r\n              <br />\r\n              {price ? (\r\n                <div className=\"flex items-center justify-between\">\r\n                  {price.interval === 'year' && (\r\n                    <div className=\"text-xs text-muted\">\r\n                      <Trans message=\"Billed Annually\" />\r\n                      <UpsellLabel products={[plan]} />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-4xl font-bold\">\r\n                  <Trans message=\"Free\" />\r\n                </div>\r\n              )}\r\n              {price ? (\r\n                <div className=\"flex items-center justify-between\">\r\n                  {price.interval === 'month' && (\r\n                    <div className=\"text-xs text-muted\">\r\n                      <Trans message=\"Get\" />\r\n                      <UpsellLabel products={[plan]} />\r\n                      <Trans message=\" When Billed Annually\" />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <div className=\"text-4xl font-bold\">\r\n                  <Trans message=\"Free\" />\r\n                </div>\r\n              )}\r\n              <div className=\"mt-12 text-base\">{plan.description}</div>\r\n              <FeatureList plan={plan} />\r\n            </div>\r\n            <ContinueButton product={plan} price={price} />\r\n          </m.div>\r\n        );\r\n      })}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\ninterface FeatureListProps {\r\n  plan: Product;\r\n}\r\nfunction FeatureList({plan}: FeatureListProps) {\r\n  if (!plan.feature_list.length) return null;\r\n  return (\r\n    <div className=\"mt-32\">\r\n      <div className=\"mb-10 text-sm font-semibold\">\r\n        <Trans message=\"What's included\" />\r\n      </div>\r\n      {plan.feature_list.map(feature => (\r\n        <div key={feature} className=\"flex items-center gap-10 text-sm\">\r\n          <CheckIcon className=\"text-positive\" size=\"sm\" />\r\n          <Trans message={feature} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ContinueButtonProps {\r\n  product: Product;\r\n  price: Price;\r\n}\r\nfunction ContinueButton({product, price}: ContinueButtonProps) {\r\n  const {subscription} = useBillingUser();\r\n  if (!subscription?.price || !subscription?.product) return null;\r\n\r\n  if (\r\n    subscription.product_id === product.id &&\r\n    subscription.price_id === price.id\r\n  ) {\r\n    return (\r\n      <div className=\"flex w-[168px] items-center justify-center gap-10 text-muted\">\r\n        <CheckIcon size=\"md\" />\r\n        <Trans message=\"Current plan\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      variant=\"flat\"\r\n      color=\"primary\"\r\n      className=\"w-[168px]\"\r\n      size=\"md\"\r\n      elementType={Link}\r\n      to={`/billing/change-plan/${product.id}/${price.id}/confirm`}\r\n    >\r\n      <Trans message=\"Continue\" />\r\n    </Button>\r\n  );\r\n}\r\n\r\nfunction PlanSkeleton() {\r\n  return (\r\n    <m.div\r\n      key=\"plan-skeleton\"\r\n      {...opacityAnimation}\r\n      className=\"border-b py-32 text-2xl\"\r\n    >\r\n      <Skeleton className=\"mb-8\" />\r\n      <Skeleton className=\"mb-14\" />\r\n      <Skeleton className=\"mb-24\" />\r\n      <Skeleton className=\"mb-12\" />\r\n    </m.div>\r\n  );\r\n}\r\n","import {useMutation} from '@tanstack/react-query';\r\nimport {apiClient} from '../../../http/query-client';\r\nimport {useTrans} from '../../../i18n/use-trans';\r\nimport {BackendResponse} from '../../../http/backend-response/backend-response';\r\nimport {toast} from '../../../ui/toast/toast';\r\nimport {message} from '../../../i18n/message';\r\nimport {User} from '../../../auth/user';\r\nimport {invalidateBillingUserQuery} from '../use-billing-user';\r\nimport {useNavigate} from '../../../utils/hooks/use-navigate';\r\nimport {showHttpErrorToast} from '../../../utils/http/show-http-error-toast';\r\n\r\ninterface Response extends BackendResponse {\r\n  user: User;\r\n}\r\n\r\ninterface Payload {\r\n  subscriptionId: number;\r\n  newProductId: number;\r\n  newPriceId: number;\r\n}\r\n\r\nexport function useChangeSubscriptionPlan() {\r\n  const {trans} = useTrans();\r\n  const navigate = useNavigate();\r\n  return useMutation({\r\n    mutationFn: (props: Payload) => changePlan(props),\r\n    onSuccess: () => {\r\n      toast(trans(message('Plan changed.')));\r\n      invalidateBillingUserQuery();\r\n      navigate('/billing');\r\n    },\r\n    onError: err => showHttpErrorToast(err),\r\n  });\r\n}\r\n\r\nfunction changePlan({subscriptionId, ...other}: Payload): Promise<Response> {\r\n  return apiClient\r\n    .post(`billing/subscriptions/${subscriptionId}/change-plan`, other)\r\n    .then(r => r.data);\r\n}\r\n","import {Breadcrumb} from '../../ui/breadcrumbs/breadcrumb';\r\nimport {BreadcrumbItem} from '../../ui/breadcrumbs/breadcrumb-item';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {useNavigate} from '../../utils/hooks/use-navigate';\r\nimport {BillingPlanPanel} from './billing-plan-panel';\r\nimport {Fragment} from 'react';\r\nimport {useProducts} from '../pricing-table/use-products';\r\nimport {Link, Navigate, useParams} from 'react-router-dom';\r\nimport {Button} from '../../ui/buttons/button';\r\nimport {FormattedPrice} from '../../i18n/formatted-price';\r\nimport {useBillingUser} from './use-billing-user';\r\nimport {FormattedDate} from '../../i18n/formatted-date';\r\nimport {useChangeSubscriptionPlan} from './requests/use-change-subscription-plan';\r\nimport {UpsellLabel} from '@common/billing/pricing-table/upsell-label';\r\n\r\nconst previousUrl = '/billing/change-plan';\r\n\r\nexport function ConfirmPlanChangePage() {\r\n  const {productId, priceId} = useParams();\r\n  const navigate = useNavigate();\r\n  const query = useProducts();\r\n  const {subscription} = useBillingUser();\r\n  const changePlan = useChangeSubscriptionPlan();\r\n\r\n  if (!query.data || subscription?.price_id == priceId) {\r\n    return <Navigate to=\"/billing/change-plan\" replace />;\r\n  }\r\n\r\n  const newProduct = query.data.products.find(p => `${p.id}` === productId);\r\n  const newPrice = newProduct?.prices.find(p => `${p.id}` === priceId);\r\n\r\n  if (!newProduct || !newPrice || !subscription) {\r\n    navigate(previousUrl);\r\n    return null;\r\n  }\r\n\r\n  const newDate = (\r\n    <span className=\"whitespace-nowrap\">\r\n      <FormattedDate date={subscription.renews_at} preset=\"long\" />;\r\n    </span>\r\n  );\r\n\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem isLink onSelected={() => navigate('/billing')}>\r\n          <Trans message=\"Billing\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem onSelected={() => navigate(previousUrl)}>\r\n          <Trans message=\"Plans\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <Trans message=\"Confirm\" />\r\n        </BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <h1 className=\"text-3xl font-bold my-32 md:my-64\">\r\n        <Trans message=\"Confirm your new plan\" />\r\n      </h1>\r\n      <BillingPlanPanel title={<Trans message=\"Changing to\" />}>\r\n        <div className=\"max-w-[464px]\">\r\n          <div className=\"text-xl font-bold\">{newProduct.name}</div>\r\n          {newPrice ? (\r\n            <FormattedPrice\r\n              priceClassName=\"font-bold text-4xl\"\r\n              periodClassName=\"text-muted text-xs\"\r\n              variant=\"separateLine\"\r\n              price={newPrice}\r\n              className=\"mt-32\"\r\n            />\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <br />\r\n          {newPrice ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {newPrice.interval === 'year' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Annually\" />\r\n                  <UpsellLabel />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          {newPrice ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {newPrice.interval === 'month' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Monthly\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <div className=\"text-base mt-12 border-b pb-24 mb-48\">\r\n            <Trans\r\n              message=\"You will be charged the new price starting :date\"\r\n              values={{date: newDate}}\r\n            />\r\n          </div>\r\n          <div>\r\n            <div>\r\n              <Button\r\n                variant=\"flat\"\r\n                color=\"primary\"\r\n                size=\"md\"\r\n                className=\"w-full mb-16\"\r\n                onClick={() => {\r\n                  changePlan.mutate({\r\n                    subscriptionId: subscription.id,\r\n                    newProductId: newProduct.id,\r\n                    newPriceId: newPrice.id,\r\n                  });\r\n                }}\r\n                disabled={changePlan.isPending}\r\n              >\r\n                <Trans message=\"Confirm\" />\r\n              </Button>\r\n            </div>\r\n            <div>\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full\"\r\n                to={previousUrl}\r\n                elementType={Link}\r\n              >\r\n                <Trans message=\"Go back\" />\r\n              </Button>\r\n            </div>\r\n            <div className=\"text-xs text-muted mt-12\">\r\n              <Trans message=\"By confirming your new plan, you agree to our terms of Service and privacy policy.\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </BillingPlanPanel>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {Breadcrumb} from '../../ui/breadcrumbs/breadcrumb';\r\nimport {BreadcrumbItem} from '../../ui/breadcrumbs/breadcrumb-item';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {useNavigate} from '../../utils/hooks/use-navigate';\r\nimport {BillingPlanPanel} from './billing-plan-panel';\r\nimport {Fragment} from 'react';\r\nimport {useProducts} from '../pricing-table/use-products';\r\nimport {Link} from 'react-router-dom';\r\nimport {Button} from '../../ui/buttons/button';\r\nimport {FormattedPrice} from '../../i18n/formatted-price';\r\nimport {invalidateBillingUserQuery, useBillingUser} from './use-billing-user';\r\nimport {useCancelSubscription} from './requests/use-cancel-subscription';\r\nimport {FormattedDate} from '../../i18n/formatted-date';\r\nimport {UpsellLabel} from '@common/billing/pricing-table/upsell-label';\r\n\r\nconst previousUrl = '/billing';\r\n\r\nexport function ConfirmPlanCancellationPage() {\r\n  const navigate = useNavigate();\r\n  const query = useProducts();\r\n  const {subscription} = useBillingUser();\r\n  const cancelSubscription = useCancelSubscription();\r\n\r\n  const product = subscription?.product;\r\n  const price = subscription?.price;\r\n\r\n  if (!query.data) {\r\n    return null;\r\n  }\r\n\r\n  if (!subscription || !product || !price) {\r\n    navigate(previousUrl);\r\n    return null;\r\n  }\r\n\r\n  const renewDate = (\r\n    <span className=\"whitespace-nowrap\">\r\n      <FormattedDate date={subscription.renews_at} preset=\"long\" />\r\n    </span>\r\n  );\r\n\r\n  const handleSubscriptionCancel = () => {\r\n    cancelSubscription.mutate(\r\n      {\r\n        subscriptionId: subscription.id,\r\n      },\r\n      {\r\n        onSuccess: () => {\r\n          invalidateBillingUserQuery();\r\n          navigate('/billing');\r\n        },\r\n      },\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem isLink onSelected={() => navigate(previousUrl)}>\r\n          <Trans message=\"Billing\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <Trans message=\"Cancel\" />\r\n        </BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <h1 className=\"text-3xl font-bold my-32 md:my-64\">\r\n        <Trans message=\"Cancel your plan\" />\r\n      </h1>\r\n      <BillingPlanPanel title={<Trans message=\"Current plan\" />}>\r\n        <div className=\"max-w-[464px]\">\r\n          <div className=\"text-xl font-bold\">{product.name}</div>\r\n          {price ? (\r\n            <FormattedPrice\r\n              priceClassName=\"font-bold text-4xl\"\r\n              periodClassName=\"text-muted text-xs\"\r\n              variant=\"separateLine\"\r\n              price={price}\r\n              className=\"mt-32\"\r\n            />\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <br />\r\n          {price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {price.interval === 'year' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Annually\" />\r\n                  <UpsellLabel />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          {price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {price.interval === 'month' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Monthly\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <div className=\"text-base mt-12 border-b pb-24 mb-48\">\r\n            <Trans\r\n              message=\"Your plan will be canceled, but is still available until the end of your billing period on :date\"\r\n              values={{date: renewDate}}\r\n            />\r\n            <div className=\"mt-20\">\r\n              <Trans message=\"If you change your mind, you can renew your subscription.\" />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <div>\r\n              <Button\r\n                variant=\"flat\"\r\n                color=\"primary\"\r\n                size=\"md\"\r\n                className=\"w-full mb-16\"\r\n                onClick={handleSubscriptionCancel}\r\n                disabled={cancelSubscription.isPending}\r\n              >\r\n                <Trans message=\"Cancel plan\" />\r\n              </Button>\r\n            </div>\r\n            <div>\r\n              <Button\r\n                variant=\"outline\"\r\n                className=\"w-full\"\r\n                to={previousUrl}\r\n                elementType={Link}\r\n              >\r\n                <Trans message=\"Go back\" />\r\n              </Button>\r\n            </div>\r\n            <div className=\"text-xs text-muted mt-12\">\r\n              <Trans message=\"By cancelling your plan, you agree to our terms of service and privacy policy.\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </BillingPlanPanel>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {Breadcrumb} from '../../ui/breadcrumbs/breadcrumb';\r\nimport {BreadcrumbItem} from '../../ui/breadcrumbs/breadcrumb-item';\r\nimport {Trans} from '../../i18n/trans';\r\nimport {useNavigate} from '../../utils/hooks/use-navigate';\r\nimport {BillingPlanPanel} from './billing-plan-panel';\r\nimport {Fragment} from 'react';\r\nimport {useProducts} from '../pricing-table/use-products';\r\nimport {Link} from 'react-router-dom';\r\nimport {Button} from '../../ui/buttons/button';\r\nimport {FormattedPrice} from '../../i18n/formatted-price';\r\nimport {invalidateBillingUserQuery, useBillingUser} from './use-billing-user';\r\nimport {FormattedDate} from '../../i18n/formatted-date';\r\nimport {useResumeSubscription} from './requests/use-resume-subscription';\r\nimport {UpsellLabel} from '@common/billing/pricing-table/upsell-label';\r\n\r\nconst previousUrl = '/billing';\r\n\r\nexport function ConfirmPlanRenewalPage() {\r\n  const navigate = useNavigate();\r\n  const query = useProducts();\r\n  const {subscription} = useBillingUser();\r\n  const resumeSubscription = useResumeSubscription();\r\n\r\n  const product = subscription?.product;\r\n  const price = subscription?.price;\r\n\r\n  if (!query.data) {\r\n    return null;\r\n  }\r\n\r\n  if (!subscription || !product || !price) {\r\n    navigate(previousUrl);\r\n    return null;\r\n  }\r\n\r\n  const endDate = (\r\n    <span className=\"whitespace-nowrap\">\r\n      <FormattedDate date={subscription.ends_at} preset=\"long\" />;\r\n    </span>\r\n  );\r\n\r\n  const handleResumeSubscription = () => {\r\n    resumeSubscription.mutate(\r\n      {\r\n        subscriptionId: subscription.id,\r\n      },\r\n      {\r\n        onSuccess: () => {\r\n          invalidateBillingUserQuery();\r\n          navigate('/billing');\r\n        },\r\n      },\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      <Breadcrumb>\r\n        <BreadcrumbItem isLink onSelected={() => navigate(previousUrl)}>\r\n          <Trans message=\"Billing\" />\r\n        </BreadcrumbItem>\r\n        <BreadcrumbItem>\r\n          <Trans message=\"Renew\" />\r\n        </BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <h1 className=\"text-3xl font-bold my-32 md:my-64\">\r\n        <Trans message=\"Renew your plan\" />\r\n      </h1>\r\n      <BillingPlanPanel title={<Trans message=\"Current plan\" />}>\r\n        <div className=\"max-w-[464px]\">\r\n          <div className=\"text-xl font-bold\">{product.name}</div>\r\n          {price ? (\r\n            <FormattedPrice\r\n              priceClassName=\"font-bold text-4xl\"\r\n              periodClassName=\"text-muted text-xs\"\r\n              variant=\"separateLine\"\r\n              price={price}\r\n              className=\"mt-32\"\r\n            />\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <br />\r\n          {price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {price.interval === 'year' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Annually\" />\r\n                  <UpsellLabel />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          {price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {price.interval === 'month' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Monthly\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <div className=\"text-base mt-12 border-b pb-24 mb-48\">\r\n            <Trans\r\n              message=\"This plan will no longer be canceled. It will renew on :date\"\r\n              values={{date: endDate}}\r\n            />\r\n          </div>\r\n          <Button\r\n            variant=\"flat\"\r\n            color=\"primary\"\r\n            size=\"md\"\r\n            className=\"w-full mb-16\"\r\n            onClick={handleResumeSubscription}\r\n            disabled={resumeSubscription.isPending}\r\n          >\r\n            <Trans message=\"Renew plan\" />\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            className=\"w-full\"\r\n            to={previousUrl}\r\n            elementType={Link}\r\n          >\r\n            <Trans message=\"Go back\" />\r\n          </Button>\r\n          <div className=\"text-xs text-muted mt-12\">\r\n            <Trans message=\"By renewing your plan, you agree to our terms of service and privacy policy.\" />\r\n          </div>\r\n        </div>\r\n      </BillingPlanPanel>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {useBillingUser} from '../use-billing-user';\r\nimport {FormattedDate} from '../../../i18n/formatted-date';\r\nimport {BillingPlanPanel} from '../billing-plan-panel';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {Chip} from '../../../ui/forms/input-field/chip-field/chip';\r\nimport {FormattedPrice} from '../../../i18n/formatted-price';\r\nimport {CalendarTodayIcon} from '../../../icons/material/CalendarToday';\r\nimport {Button} from '../../../ui/buttons/button';\r\nimport {Link} from 'react-router-dom';\r\n\r\nexport function CancelledPlanPanel() {\r\n  const {subscription} = useBillingUser();\r\n  if (!subscription?.price || !subscription?.product) return null;\r\n\r\n  const endingDate = (\r\n    <span className=\"whitespace-nowrap\">\r\n      <FormattedDate preset=\"long\" date={subscription.ends_at} />\r\n    </span>\r\n  );\r\n\r\n  return (\r\n    <BillingPlanPanel title={<Trans message=\"Current plan\" />}>\r\n      <div className=\"mt-24 flex flex-col justify-between gap-20\">\r\n        <div>\r\n          <Chip\r\n            className=\"mb-10 w-min\"\r\n            size=\"xs\"\r\n            radius=\"rounded\"\r\n            color=\"danger\"\r\n          >\r\n            <Trans message=\"Canceled\" />\r\n          </Chip>\r\n          <div className=\"mb-2 text-xl font-bold\">\r\n            {subscription.product.name}\r\n          </div>\r\n          <FormattedPrice\r\n            priceClassName=\"font-bold text-4xl\"\r\n            periodClassName=\"text-muted text-xs\"\r\n            variant=\"separateLine\"\r\n            price={subscription.price}\r\n            className=\"mt-32\"\r\n          />\r\n          <div className=\"flex items-center gap-8 text-base\">\r\n            <CalendarTodayIcon size=\"sm\" className=\"text-muted\" />\r\n            <div className=\"flex-auto\">\r\n              <Trans\r\n                message=\"Your plan will be canceled on :date\"\r\n                values={{date: endingDate}}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"w-[233px]\">\r\n          <Button\r\n            variant=\"flat\"\r\n            color=\"primary\"\r\n            size=\"md\"\r\n            className=\"mb-12 w-full\"\r\n            elementType={Link}\r\n            to=\"/billing/renew\"\r\n          >\r\n            <Trans message=\"Renew plan\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </BillingPlanPanel>\r\n  );\r\n}\r\n","import {useBillingUser} from '../use-billing-user';\r\nimport {FormattedDate} from '../../../i18n/formatted-date';\r\nimport {BillingPlanPanel} from '../billing-plan-panel';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {FormattedPrice} from '../../../i18n/formatted-price';\r\nimport {Button} from '../../../ui/buttons/button';\r\nimport {Link} from 'react-router-dom';\r\nimport {UpsellLabel} from '@common/billing/pricing-table/upsell-label';\r\n\r\nexport function ActivePlanPanel() {\r\n  const {subscription} = useBillingUser();\r\n  if (!subscription?.price || !subscription?.product) return null;\r\n\r\n  const renewDate = (\r\n    <FormattedDate preset=\"long\" date={subscription.renews_at} />\r\n  );\r\n\r\n  return (\r\n    <BillingPlanPanel title={<Trans message=\"Current plan\" />}>\r\n      <div className=\"mt-24 flex justify-between gap-20\">\r\n        <div>\r\n          <div className=\"mb-2 text-xl font-bold\">\r\n            {subscription.product.name}\r\n          </div>\r\n          {subscription.price ? (\r\n            <FormattedPrice\r\n              priceClassName=\"font-bold text-4xl\"\r\n              periodClassName=\"text-muted text-xs\"\r\n              variant=\"separateLine\"\r\n              price={subscription.price}\r\n              className=\"mt-32\"\r\n            />\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <br />\r\n          {subscription.price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {subscription.price.interval === 'year' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Billed Annually\" />\r\n                  <UpsellLabel />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <br />\r\n          {subscription.price ? (\r\n            <div className=\"flex items-center justify-between\">\r\n              {subscription.price.interval === 'month' && (\r\n                <div className=\"text-xs text-muted\">\r\n                  <Trans message=\"Get\" />\r\n                  <UpsellLabel />\r\n                  <Trans message=\" When Billed Annually\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-4xl font-bold\">\r\n              <Trans message=\"Free\" />\r\n            </div>\r\n          )}\r\n          <div className=\"text-base\">\r\n            <Trans\r\n              message=\"Your plan renews on :date\"\r\n              values={{date: renewDate}}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"w-[233px]\">\r\n          <Button\r\n            variant=\"flat\"\r\n            color=\"primary\"\r\n            size=\"md\"\r\n            className=\"mb-12 w-full\"\r\n            elementType={Link}\r\n            to=\"/billing/change-plan\"\r\n            disabled={subscription.gateway_name === 'none'}\r\n          >\r\n            <Trans message=\"Change plan\" />\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            color=\"danger\"\r\n            size=\"md\"\r\n            className=\"w-full\"\r\n            elementType={Link}\r\n            to=\"/billing/cancel\"\r\n          >\r\n            <Trans message=\"Cancel plan\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </BillingPlanPanel>\r\n  );\r\n}\r\n","export default \"__VITE_ASSET__955f072d__\"","import {useBillingUser} from '../use-billing-user';\r\nimport {BillingPlanPanel} from '../billing-plan-panel';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {Link} from 'react-router-dom';\r\nimport {EditIcon} from '../../../icons/material/Edit';\r\nimport {Fragment} from 'react';\r\nimport paypalSvg from './paypal.svg';\r\nimport {SvgImage} from '../../../ui/images/svg-image/svg-image';\r\n\r\nexport function PaymentMethodPanel() {\r\n  const {user, subscription} = useBillingUser();\r\n  if (!user || !subscription) return null;\r\n\r\n  const isPaypal = subscription.gateway_name === 'paypal';\r\n  const PaymentMethod = isPaypal ? PaypalPaymentMethod : CardPaymentMethod;\r\n\r\n  return (\r\n    <BillingPlanPanel title={<Trans message=\"Payment method\" />}>\r\n      <PaymentMethod\r\n        methodClassName=\"whitespace-nowrap text-base max-w-[464px] flex items-center gap-10\"\r\n        linkClassName=\"flex items-center gap-4 text-muted mt-18 block hover:underline\"\r\n      />\r\n    </BillingPlanPanel>\r\n  );\r\n}\r\n\r\ninterface PaymentMethodProps {\r\n  methodClassName: string;\r\n  linkClassName: string;\r\n}\r\nfunction CardPaymentMethod({\r\n  methodClassName,\r\n  linkClassName,\r\n}: PaymentMethodProps) {\r\n  const {user} = useBillingUser();\r\n  if (!user) return null;\r\n  return (\r\n    <Fragment>\r\n      <div className={methodClassName}>\r\n        <span className=\"capitalize\">{user.card_brand}</span> ••••\r\n        {user.card_last_four}\r\n        {user.card_expires && (\r\n          <div className=\"ml-auto\">\r\n            <Trans message=\"Expires :date\" values={{date: user.card_expires}} />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <Link className={linkClassName} to=\"/billing/change-payment-method\">\r\n        <EditIcon size=\"sm\" />\r\n        <Trans message=\"Change payment method\" />\r\n      </Link>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nfunction PaypalPaymentMethod({\r\n  methodClassName,\r\n  linkClassName,\r\n}: PaymentMethodProps) {\r\n  const {subscription} = useBillingUser();\r\n  return (\r\n    <Fragment>\r\n      <div className={methodClassName}>\r\n        <SvgImage src={paypalSvg} />\r\n      </div>\r\n      <a\r\n        className={linkClassName}\r\n        href={`https://www.sandbox.paypal.com/myaccount/autopay/connect/${subscription?.gateway_id}/funding`}\r\n        target=\"_blank\"\r\n        rel=\"noreferrer\"\r\n      >\r\n        <EditIcon size=\"sm\" />\r\n        <Trans message=\"Change payment method\" />\r\n      </a>\r\n    </Fragment>\r\n  );\r\n}\r\n","import {useQuery} from '@tanstack/react-query';\r\nimport {apiClient} from '@common/http/query-client';\r\nimport {Invoice} from '@common/billing/invoice';\r\nimport {BackendResponse} from '@common/http/backend-response/backend-response';\r\n\r\nconst Endpoint = 'billing/invoices';\r\n\r\nexport interface FetchInvoicesResponse extends BackendResponse {\r\n  invoices: Invoice[];\r\n}\r\n\r\nexport function useInvoices(userId: number) {\r\n  return useQuery({\r\n    queryKey: [Endpoint],\r\n    queryFn: () => fetchInvoices(userId),\r\n  });\r\n}\r\n\r\nfunction fetchInvoices(userId: number): Promise<FetchInvoicesResponse> {\r\n  return apiClient\r\n    .get(Endpoint, {params: {userId}})\r\n    .then(response => response.data);\r\n}\r\n","import {useBillingUser} from '../use-billing-user';\r\nimport {BillingPlanPanel} from '../billing-plan-panel';\r\nimport {Trans} from '../../../i18n/trans';\r\nimport {useInvoices} from '../requests/use-invoices';\r\nimport {FormattedDate} from '../../../i18n/formatted-date';\r\nimport {FormattedCurrency} from '../../../i18n/formatted-currency';\r\nimport {Chip} from '../../../ui/forms/input-field/chip-field/chip';\r\nimport {OpenInNewIcon} from '../../../icons/material/OpenInNew';\r\nimport {Skeleton} from '../../../ui/skeleton/skeleton';\r\nimport {AnimatePresence, m} from 'framer-motion';\r\nimport {Invoice} from '../../invoice';\r\nimport {opacityAnimation} from '../../../ui/animation/opacity-animation';\r\nimport {useSettings} from '../../../core/settings/use-settings';\r\n\r\nexport function InvoiceHistoryPanel() {\r\n  const {user} = useBillingUser();\r\n  const query = useInvoices(user?.id!);\r\n  if (!user) return null;\r\n\r\n  const invoices = query.data?.invoices;\r\n\r\n  return (\r\n    <BillingPlanPanel title={<Trans message=\"Payment history\" />}>\r\n      <div className=\"max-w-[464px]\">\r\n        <AnimatePresence initial={false} mode=\"wait\">\r\n          {query.isLoading ? (\r\n            <LoadingSkeleton key=\"loading-skeleton\" />\r\n          ) : (\r\n            <InvoiceList key=\"invoices\" invoices={invoices} />\r\n          )}\r\n        </AnimatePresence>\r\n      </div>\r\n    </BillingPlanPanel>\r\n  );\r\n}\r\n\r\ninterface InvoiceListProps {\r\n  invoices?: Invoice[];\r\n}\r\nfunction InvoiceList({invoices}: InvoiceListProps) {\r\n  const {base_url} = useSettings();\r\n  return (\r\n    <m.div {...opacityAnimation}>\r\n      {!invoices?.length ? (\r\n        <div className=\"text-muted italic\">\r\n          <Trans message=\"No invoices yet\" />\r\n        </div>\r\n      ) : undefined}\r\n      {invoices?.map(invoice => (\r\n        <div\r\n          className=\"whitespace-nowrap text-base flex items-center justify-between gap-10 mb-14\"\r\n          key={invoice.id}\r\n        >\r\n          <a\r\n            href={`${base_url}/billing/invoices/${invoice.uuid}`}\r\n            target=\"_blank\"\r\n            className=\"flex items-center gap-8 hover:underline\"\r\n            rel=\"noreferrer\"\r\n          >\r\n            <FormattedDate date={invoice.created_at} />\r\n            <OpenInNewIcon size=\"xs\" />\r\n          </a>\r\n          {invoice.subscription.price && (\r\n            <div>\r\n              <FormattedCurrency\r\n                value={invoice.subscription.price.amount}\r\n                currency={invoice.subscription.price.currency}\r\n                currency_position={invoice.subscription.price.currency_position}\r\n              />\r\n            </div>\r\n          )}\r\n          <Chip\r\n            size=\"xs\"\r\n            color={invoice.paid ? 'positive' : 'danger'}\r\n            radius=\"rounded\"\r\n          >\r\n            {invoice.paid ? (\r\n              <Trans message=\"Paid\" />\r\n            ) : (\r\n              <Trans message=\"Unpaid\" />\r\n            )}\r\n          </Chip>\r\n          <div>{invoice.subscription.product?.name}</div>\r\n        </div>\r\n      ))}\r\n    </m.div>\r\n  );\r\n}\r\n\r\nfunction LoadingSkeleton() {\r\n  return (\r\n    <m.div {...opacityAnimation}>\r\n      <Skeleton className=\"mb-14\" />\r\n      <Skeleton className=\"mb-14\" />\r\n      <Skeleton className=\"mb-14\" />\r\n      <Skeleton className=\"mb-14\" />\r\n      <Skeleton />\r\n    </m.div>\r\n  );\r\n}\r\n","import {useBillingUser} from './use-billing-user';\r\nimport {CancelledPlanPanel} from './panels/cancelled-plan-panel';\r\nimport {ActivePlanPanel} from './panels/active-plan-panel';\r\nimport {PaymentMethodPanel} from './panels/payment-method-panel';\r\nimport {InvoiceHistoryPanel} from './panels/invoice-history-panel';\r\n\r\nexport function BillingPage() {\r\n  const {subscription} = useBillingUser();\r\n  if (!subscription?.price || !subscription?.product) return null;\r\n\r\n  const planPanel = subscription.ends_at ? (\r\n    <CancelledPlanPanel />\r\n  ) : (\r\n    <ActivePlanPanel />\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      {planPanel}\r\n      <PaymentMethodPanel />\r\n      <InvoiceHistoryPanel />\r\n    </div>\r\n  );\r\n}\r\n","import {Route, Routes} from 'react-router-dom';\r\nimport React from 'react';\r\nimport {SubscribedRoute} from '../../auth/guards/subscribed-route';\r\nimport {BillingPageLayout} from './billing-page-layout';\r\nimport {ChangePaymentMethodLayout} from './change-payment-method/change-payment-method-layout';\r\nimport {ChangePaymentMethodPage} from './change-payment-method/change-payment-method-page';\r\nimport {ChangePaymentMethodDone} from './change-payment-method/change-payment-method-done';\r\nimport {ChangePlanPage} from './change-plan-page';\r\nimport {ConfirmPlanChangePage} from './confirm-plan-change-page';\r\nimport {ConfirmPlanCancellationPage} from './confirm-plan-cancellation-page';\r\nimport {ConfirmPlanRenewalPage} from './confirm-plan-renewal-page';\r\nimport {BillingPage} from './billing-page';\r\n\r\nexport default function BillingPageRoutes() {\r\n  return (\r\n    <Routes>\r\n      <Route\r\n        path=\"/\"\r\n        element={\r\n          <SubscribedRoute>\r\n            <BillingPageLayout />\r\n          </SubscribedRoute>\r\n        }\r\n      >\r\n        <Route index element={<BillingPage />} />\r\n        <Route\r\n          path=\"change-payment-method\"\r\n          element={<ChangePaymentMethodLayout />}\r\n        >\r\n          <Route index element={<ChangePaymentMethodPage />} />\r\n          <Route path=\"done\" element={<ChangePaymentMethodDone />} />\r\n        </Route>\r\n        <Route path=\"change-plan\" element={<ChangePlanPage />} />\r\n        <Route\r\n          path=\"change-plan/:productId/:priceId/confirm\"\r\n          element={<ConfirmPlanChangePage />}\r\n        />\r\n        <Route path=\"cancel\" element={<ConfirmPlanCancellationPage />} />\r\n        <Route path=\"renew\" element={<ConfirmPlanRenewalPage />} />\r\n      </Route>\r\n    </Routes>\r\n  );\r\n}\r\n"],"names":["previousUrl","changePlan"],"mappings":"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"}