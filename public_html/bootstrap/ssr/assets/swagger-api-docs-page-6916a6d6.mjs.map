{"version":3,"file":"swagger-api-docs-page-6916a6d6.mjs","sources":["../../../common/resources/client/swagger/swagger-api-docs-page.tsx"],"sourcesContent":["import SwaggerUI from 'swagger-ui-react';\r\nimport 'swagger-ui-react/swagger-ui.css';\r\nimport { Settings } from '../core/settings/settings';\r\nimport { useMemo } from 'react';\r\nimport { DashboardLayout } from '@common/ui/layout/dashboard-layout';\r\nimport { SidedavFrontend } from '@app/web-player/layout/sidenav-frontend';\r\nimport { Sidenav } from '@app/web-player/layout/sidenav';\r\nimport { DashboardContent } from '@common/ui/layout/dashboard-content';\r\nimport { useSettings } from '@common/core/settings/use-settings';\r\nimport { useIsMobileMediaQuery } from '@common/utils/hooks/is-mobile-media-query';\r\nimport { PlayerNavbarLayout } from '@app/web-player/layout/player-navbar-layout'; // Updated import\r\n\r\nexport default function SwaggerApiDocsPage() {\r\n  const settings = useSettings();\r\n  const { player } = useSettings();\r\n  const isMobile = useIsMobileMediaQuery();\r\n\r\n  const plugins = useMemo(() => {\r\n    return getPluginsConfig(settings);\r\n  }, [settings]);\r\n\r\n  return (\r\n    <div className=\"h-full overflow-y-auto bg-alt\">\r\n      <DashboardLayout\r\n        name=\"web-player\"\r\n        initialRightSidenavStatus={player?.hide_queue ? 'closed' : 'open'}\r\n      >\r\n        {/* Replace the old Navbar with PlayerNavbarLayout */}\r\n        <PlayerNavbarLayout\r\n          size=\"sm\"\r\n          menuPosition=\"landing-page-navbar\"\r\n          className=\"flex-shrink-0\"\r\n        />\r\n        <SidedavFrontend position=\"left\" display=\"block\">\r\n          <Sidenav />\r\n        </SidedavFrontend>\r\n        <DashboardContent>\r\n          <div className=\"relative\">\r\n            <div className=\"container mx-auto\">\r\n              <SwaggerUI\r\n                url={`${settings.base_url}/swagger.yaml`}\r\n                plugins={plugins}\r\n                onComplete={system => {\r\n                  //scroll to Tickets/incomingEmail\r\n                  const hash = location.hash.slice(1);\r\n                  if (hash) {\r\n                    const el = document.querySelector(\r\n                      `#operations-${hash.replace(/\\//g, '-')}`,\r\n                    );\r\n                    if (el) {\r\n                      el.scrollIntoView();\r\n                      el.querySelector('button')?.click();\r\n                    }\r\n                  }\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </DashboardContent>\r\n      </DashboardLayout>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getPluginsConfig(settings: Settings) {\r\n  return [\r\n    {\r\n      statePlugins: {\r\n        spec: {\r\n          wrapActions: {\r\n            updateSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                // Replace site name\r\n                spec = spec.replaceAll(\r\n                  'SITE_NAME',\r\n                  settings.branding.site_name.replace(':', ''),\r\n                );\r\n                // Replace site url\r\n                spec = spec.replaceAll('SITE_URL', settings.base_url);\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n            // Add current server url to docs\r\n            updateJsonSpec: (oriAction: any) => {\r\n              return (spec: any) => {\r\n                spec.servers = [{ url: `${settings.base_url}/api/v1` }];\r\n                return oriAction(spec);\r\n              };\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  ];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYA,SAAwB,qBAAqB;AAC3C,QAAM,WAAW;AACX,QAAA,EAAE,WAAW;AACF,wBAAsB;AAEjC,QAAA,UAAU,QAAQ,MAAM;AAC5B,WAAO,iBAAiB,QAAQ;AAAA,EAAA,GAC/B,CAAC,QAAQ,CAAC;AAGX,SAAA,oBAAC,OAAI,EAAA,WAAU,iCACb,UAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL,4BAA2B,iCAAQ,cAAa,WAAW;AAAA,MAG3D,UAAA;AAAA,QAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,MAAK;AAAA,YACL,cAAa;AAAA,YACb,WAAU;AAAA,UAAA;AAAA,QACZ;AAAA,QACA,oBAAC,mBAAgB,UAAS,QAAO,SAAQ,SACvC,UAAA,oBAAC,WAAQ,EACX,CAAA;AAAA,QACA,oBAAC,oBACC,UAAC,oBAAA,OAAA,EAAI,WAAU,YACb,UAAA,oBAAC,OAAI,EAAA,WAAU,qBACb,UAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC,KAAK,GAAG,SAAS,QAAQ;AAAA,YACzB;AAAA,YACA,YAAY,CAAU,WAAA;;AAEpB,oBAAM,OAAO,SAAS,KAAK,MAAM,CAAC;AAClC,kBAAI,MAAM;AACR,sBAAM,KAAK,SAAS;AAAA,kBAClB,eAAe,KAAK,QAAQ,OAAO,GAAG,CAAC;AAAA,gBAAA;AAEzC,oBAAI,IAAI;AACN,qBAAG,eAAe;AACf,2BAAA,cAAc,QAAQ,MAAtB,mBAAyB;AAAA,gBAC9B;AAAA,cACF;AAAA,YACF;AAAA,UAAA;AAAA,QAAA,EAEJ,CAAA,EACF,CAAA,GACF;AAAA,MAAA;AAAA,IAAA;AAAA,EAEJ,EAAA,CAAA;AAEJ;AAEA,SAAS,iBAAiB,UAAoB;AACrC,SAAA;AAAA,IACL;AAAA,MACE,cAAc;AAAA,QACZ,MAAM;AAAA,UACJ,aAAa;AAAA,YACX,YAAY,CAAC,cAAmB;AAC9B,qBAAO,CAAC,SAAc;AAEpB,uBAAO,KAAK;AAAA,kBACV;AAAA,kBACA,SAAS,SAAS,UAAU,QAAQ,KAAK,EAAE;AAAA,gBAAA;AAG7C,uBAAO,KAAK,WAAW,YAAY,SAAS,QAAQ;AACpD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA;AAAA,YAEA,gBAAgB,CAAC,cAAmB;AAClC,qBAAO,CAAC,SAAc;AACf,qBAAA,UAAU,CAAC,EAAE,KAAK,GAAG,SAAS,QAAQ,WAAW;AACtD,uBAAO,UAAU,IAAI;AAAA,cAAA;AAAA,YAEzB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EAAA;AAEJ;"}